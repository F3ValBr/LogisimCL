<html>
<head>
    <title>Bit-Labeled Tunnel</title>
</head>

<body bgcolor="FFFFFF">

<h1>
    <img align="center" height="32" width="32" src="../../../icons/bltunnel.gif">
    <em>Bit-Labeled Tunnel</em>
</h1>

<p><table>
    <tr><td><strong>Library:</strong></td>
        <td><a href="index.html">Wiring</a></td></tr>
    <tr><td><strong>Introduced:</strong></td>
        <td>LogisimCL - 3.0.0</td></tr>
    <tr><td valign="top"><strong>Appearance:</strong></td>
        <td valign="top"><img src="../../../img-libs/bitlabeledtunnel.png"></td>
        <td valign="top"><img src="../../../img-libs/bitlabeledtunnel_example.png"></td></tr>
</table></p>

<h2>Behavior</h2>

<p>
    The <em>Bit-Labeled Tunnel</em> (BLT) is a routing component designed to express
    bit-level rearrangements, selections, and replications in a compact form.
    Unlike Logisim's standard tunnel - whose purpose is to connect distant wires
    through a shared textual label - the BLT does <strong>not</strong> create implicit
    connections. Instead, its behavior depends exclusively on the
    <q>Bit Specifications</q> attribute, written in CSV format.
</p>

<p>
    The BLT takes an input bus (or provides an output bus, depending on its mode)
    and produces a reordered version of that bus according to the mapping defined
    in the specification. Each entry in the CSV corresponds to a destination bit of
    the BLT output, and each entry may refer to:
</p>

<ul>
    <li>a bit index of the input bus (e.g., <code>3</code>),</li>
    <li>a span of bits (e.g., <code>7,6,5,4</code>),</li>
    <li>the reserved constant values <code>0</code> or <code>1</code>, or</li>
    <li>a mix between all of them.</li>
</ul>

<p>
    This makes the BLT useful for constructing wiring patterns such as:
    bit extraction, bus replication, field packing/unpacking, variable-bit
    routing generated by YoSYS, and reindexing required by circuit-level
    netlists. The BLT performs no logic of its own; it merely rewires and
    rearranges data according to the mapping provided.
</p>

<h2>Pins (assuming component faces west)</h2>

<dl>

    <dt>West edge (input or output, width = Data Bits)</dt>
    <dd>
        When <q>Is Output?</q> is set to <q>No</q>, this is the BLT's input bus and pin appears at the tail of the figure.
        When set to <q>Yes</q>, this pin becomes the output bus instead, and it appears at the head of the figure.
        Its width is defined by the <q>Data Bits</q> attribute.
    </dd>

</dl>

<h2>Attributes</h2>

<dl>

    <dt>Facing</dt>
    <dd>
        Determines the orientation of the BLT symbol.
    </dd>

    <dt>Data Bits</dt>
    <dd>
        Specifies the width of the bus connected to the input side of the BLT.
        This is the maximum range from which bit indices in the CSV may be drawn.
    </dd>

    <dt>Bit Specifications (CSV format)</dt>
    <dd>
        Defines how the bits are mapped. Each comma-separated entry corresponds to
        one output bit (or one input bit, if configured as an output).
        Entries may include:
        <ul>
            <li>single bit indices, e.g., <code>5</code></li>
            <li>reserved constants: <code>0</code> or <code>1</code></li>
            <li>a combination of them all</li>
        </ul>
        Examples:<br>
        <code>N7,N6,N5,N4,N3,N2,N1,N0</code> - reverses an 8-bit bus<br>
        <code>N0,N1,N2,N3,1,1,0,0</code> - replicates selected bits with constants<br>
        If the specification refers to out-of-range indices, the resulting bits
        become undefined (<em>X</em>).
    </dd>

    <dt>Is Output?</dt>
    <dd>
        Determines the BLT's direction:
        <ul>
            <li><q>No</q>: the BLT receives data.</li>
            <li><q>Yes</q>: the BLT emits its mapped data.</li>
        </ul>
        This is primarily used by the HDL importer to match YoSYS netlist structures.
    </dd>

    <dt>Label</dt>
    <dd>
        Text label displayed on or near the BLT.
    </dd>

    <dt>Label Font</dt>
    <dd>
        Specifies the font used for the label.
    </dd>

</dl>

<h2>Poke Tool Behavior</h2>

<p>
    The BLT itself cannot be edited with the Poke Tool. However, the user may
    poke connected wires or input components to observe how the specified
    bit routing affects the resulting output.
</p>

<h2>Text Tool Behavior</h2>

<p>
    Allows editing of the BLT's label.
</p>

<p><a href="../index.html">Back to <em>Library Reference</em></a></p>

</body>
</html>
